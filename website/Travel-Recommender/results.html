<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Results – David Corcoran</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./assets/gu-logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-f3c2ea88cadbcfb37ba28ffa2c97cfc1.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="stylesheets/styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">David Corcoran</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://corcoran.georgetown.domains/Homepage/index.html"> 
<span class="menu-text">Homepage</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data_collection.html"> 
<span class="menu-text">Data Collection &amp; Preprocessing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./methods.html"> 
<span class="menu-text">Methods</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./results.html" aria-current="page"> 
<span class="menu-text">Results</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/dcorc7"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/david-corcoran-70677917a/"> <i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#query-1-hiking-trails-in-the-dolomites-italy" id="toc-query-1-hiking-trails-in-the-dolomites-italy" class="nav-link active" data-scroll-target="#query-1-hiking-trails-in-the-dolomites-italy">Query 1: “hiking trails in the Dolomites Italy”</a>
  <ul class="collapse">
  <li><a href="#bm25-results" id="toc-bm25-results" class="nav-link" data-scroll-target="#bm25-results">BM25 Results</a>
  <ul class="collapse">
  <li><a href="#top-10-results-table" id="toc-top-10-results-table" class="nav-link" data-scroll-target="#top-10-results-table">Top 10 Results Table</a></li>
  <li><a href="#query-1-map" id="toc-query-1-map" class="nav-link" data-scroll-target="#query-1-map">Query 1 Map</a></li>
  <li><a href="#interpretation" id="toc-interpretation" class="nav-link" data-scroll-target="#interpretation">Interpretation</a></li>
  <li><a href="#llm-generated-explanations-top-results" id="toc-llm-generated-explanations-top-results" class="nav-link" data-scroll-target="#llm-generated-explanations-top-results">LLM-Generated Explanations (Top Results)</a></li>
  <li><a href="#key-takeaway-bm25" id="toc-key-takeaway-bm25" class="nav-link" data-scroll-target="#key-takeaway-bm25">Key Takeaway (BM25)</a></li>
  </ul></li>
  <li><a href="#modernbert-results-semantic-retrieval" id="toc-modernbert-results-semantic-retrieval" class="nav-link" data-scroll-target="#modernbert-results-semantic-retrieval">ModernBERT Results (Semantic Retrieval)</a>
  <ul class="collapse">
  <li><a href="#top-10-results-table-1" id="toc-top-10-results-table-1" class="nav-link" data-scroll-target="#top-10-results-table-1">### Top 10 Results Table</a></li>
  <li><a href="#query-1-map-1" id="toc-query-1-map-1" class="nav-link" data-scroll-target="#query-1-map-1">Query 1 Map</a></li>
  <li><a href="#interpretation-1" id="toc-interpretation-1" class="nav-link" data-scroll-target="#interpretation-1">Interpretation</a></li>
  <li><a href="#llm-generated-explanations-top-results-1" id="toc-llm-generated-explanations-top-results-1" class="nav-link" data-scroll-target="#llm-generated-explanations-top-results-1">LLM-Generated Explanations (Top Results)</a></li>
  <li><a href="#key-takeaway-modernbert" id="toc-key-takeaway-modernbert" class="nav-link" data-scroll-target="#key-takeaway-modernbert">Key Takeaway (ModernBERT)</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#query-2-small-seaside-towns-known-for-local-food-and-slow-travel" id="toc-query-2-small-seaside-towns-known-for-local-food-and-slow-travel" class="nav-link" data-scroll-target="#query-2-small-seaside-towns-known-for-local-food-and-slow-travel">Query 2: “small seaside towns known for local food and slow travel”</a>
  <ul class="collapse">
  <li><a href="#bm25-results-1" id="toc-bm25-results-1" class="nav-link" data-scroll-target="#bm25-results-1">BM25 Results</a>
  <ul class="collapse">
  <li><a href="#top-10-results-table-2" id="toc-top-10-results-table-2" class="nav-link" data-scroll-target="#top-10-results-table-2">Top 10 Results Table</a></li>
  <li><a href="#query-2-map" id="toc-query-2-map" class="nav-link" data-scroll-target="#query-2-map">Query 2 Map</a></li>
  <li><a href="#interpretation-2" id="toc-interpretation-2" class="nav-link" data-scroll-target="#interpretation-2">Interpretation</a></li>
  <li><a href="#llm-generated-explanations-top-results-2" id="toc-llm-generated-explanations-top-results-2" class="nav-link" data-scroll-target="#llm-generated-explanations-top-results-2">LLM-Generated Explanations (Top Results)</a></li>
  <li><a href="#key-takeaway-bm25-1" id="toc-key-takeaway-bm25-1" class="nav-link" data-scroll-target="#key-takeaway-bm25-1">Key Takeaway (BM25)</a></li>
  </ul></li>
  <li><a href="#modernbert-results-semantic-retrieval-1" id="toc-modernbert-results-semantic-retrieval-1" class="nav-link" data-scroll-target="#modernbert-results-semantic-retrieval-1">ModernBERT Results (Semantic Retrieval)</a>
  <ul class="collapse">
  <li><a href="#top-10-results-table-3" id="toc-top-10-results-table-3" class="nav-link" data-scroll-target="#top-10-results-table-3">Top 10 Results Table</a></li>
  <li><a href="#query-2-map-1" id="toc-query-2-map-1" class="nav-link" data-scroll-target="#query-2-map-1">Query 2 Map</a></li>
  <li><a href="#interpretation-3" id="toc-interpretation-3" class="nav-link" data-scroll-target="#interpretation-3">Interpretation</a></li>
  <li><a href="#llm-generated-explanations-top-results-3" id="toc-llm-generated-explanations-top-results-3" class="nav-link" data-scroll-target="#llm-generated-explanations-top-results-3">LLM-Generated Explanations (Top Results)</a></li>
  <li><a href="#key-takeaway-modernbert-1" id="toc-key-takeaway-modernbert-1" class="nav-link" data-scroll-target="#key-takeaway-modernbert-1">Key Takeaway (ModernBERT)</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Results</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This section presents qualitative results from the deployed Off-the-Beaten-Path Travel Recommender, using real queries and outputs generated through the live system. We compare retrieval behavior across models, beginning with a keyword-focused query designed to showcase BM25 performance.</p>
<section id="query-1-hiking-trails-in-the-dolomites-italy" class="level1">
<h1>Query 1: “hiking trails in the Dolomites Italy”</h1>
<p><strong>Selected Activities:</strong> hiking, camping, fishing, climbing <strong>Geographic Type:</strong> mountains</p>
<p>This query is intentionally structured with explicit keywords (activity + destination + country) to evaluate BM25’s lexical matching strengths.</p>
<section id="bm25-results" class="level2">
<h2 class="anchored" data-anchor-id="bm25-results">BM25 Results</h2>
<section id="top-10-results-table" class="level3">
<h3 class="anchored" data-anchor-id="top-10-results-table">Top 10 Results Table</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 3%">
<col style="width: 23%">
<col style="width: 14%">
<col style="width: 58%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Rank</th>
<th>Destination</th>
<th>Relevance Score</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td>Alps</td>
<td><strong>46.63</strong></td>
<td>Exact keyword overlap with “Dolomites,” “Alps,” and “hiking”</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td>Pieralongia (Dolomites)</td>
<td><strong>38.68</strong></td>
<td>Strong match on Dolomites landmarks and hiking terms</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td>U.S. Virgin Islands</td>
<td><strong>37.59</strong></td>
<td>High activity overlap, but incorrect geography</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td>Yosemite National Park</td>
<td><strong>37.40</strong></td>
<td>Mountain hiking content, but unrelated region</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td>Canada</td>
<td><strong>36.50</strong></td>
<td>Broad hiking and camping mentions; country-level</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td>Norway</td>
<td><strong>35.36</strong></td>
<td>Frequent hiking and mountain keywords</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td>Hong Kong</td>
<td><strong>34.84</strong></td>
<td>Hiking-related content despite urban setting</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td>Lake Hāwea (New Zealand)</td>
<td><strong>34.30</strong></td>
<td>Outdoor hiking narratives, but distant geography</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td>Midwest (USA)</td>
<td><strong>33.71</strong></td>
<td>Seasonal outdoor activity content</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td>Texas</td>
<td><strong>32.30</strong></td>
<td>Canyon hiking; strong activity terms</td>
</tr>
</tbody>
</table>
</section>
<section id="query-1-map" class="level3">
<h3 class="anchored" data-anchor-id="query-1-map">Query 1 Map</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/bm25_query_1.png" class="img-fluid figure-img"></p>
<figcaption>BM25 Query 1 Map</figcaption>
</figure>
</div>
</section>
<section id="interpretation" class="level3">
<h3 class="anchored" data-anchor-id="interpretation">Interpretation</h3>
<p>BM25 performs very well at the top of the ranking, where results exhibit strong lexical overlap with the query terms. The first two destinations—Alps and Pieralongia—are both highly relevant and correctly grounded in the Dolomites region, demonstrating BM25’s effectiveness for explicit, structured queries.</p>
<p>However, beyond the top two results, relevance begins to degrade noticeably:</p>
<ul>
<li>Results 3–10 span a wide range of global destinations, including the Caribbean, North America, Scandinavia, East Asia, and Oceania.</li>
<li>These entries are retrieved primarily due to frequent mentions of hiking, camping, or mountains, rather than alignment with the specific geographic constraint of Italy or the Dolomites.</li>
<li>Several results (e.g., U.S. Virgin Islands, Texas) are geographically and climatically incompatible with alpine hiking, despite scoring highly.</li>
</ul>
<p>This pattern highlights a key limitation of BM25: it treats each query term independently, without enforcing joint constraints across activity, terrain, and location.</p>
</section>
<section id="llm-generated-explanations-top-results" class="level3">
<h3 class="anchored" data-anchor-id="llm-generated-explanations-top-results">LLM-Generated Explanations (Top Results)</h3>
<p>The system’s explanation module further clarifies why each result was returned:</p>
<p><strong>Alps:</strong> The explanation explicitly references hiking routes in the Dolomites, alpine trail systems, via ferrata climbing, and specific mountain towns used as hiking bases. This confirms a strong alignment between the query intent and the retrieved content.</p>
<p><strong>Pieralongia:</strong> The explanation highlights Dolomites landmarks such as Seceda and Alpe di Siusi, emphasizing mountain meadows, hiking trails, and alpine terrain consistent with the query.</p>
<p><strong>U.S. Virgin Islands:</strong> While the explanation correctly notes hiking, camping, and climbing opportunities, it also reveals a semantic mismatch: the destination satisfies activity intent but not geographic intent.</p>
</section>
<section id="key-takeaway-bm25" class="level3">
<h3 class="anchored" data-anchor-id="key-takeaway-bm25">Key Takeaway (BM25)</h3>
<p>This expanded result set demonstrates that BM25:</p>
<ul>
<li>Excels at precise keyword matching, especially at top ranks</li>
<li>Performs well for explicit, structured queries</li>
<li>Does not enforce semantic or geographic coherence across query components</li>
<li>Produces increasingly noisy results as rank increases</li>
</ul>
<p>These characteristics make BM25 a strong baseline for lexical relevance, but also motivate the use of semantic retrieval models like ModernBERT when contextual alignment and geographic coherence are important.</p>
<p>In the next section, these BM25 results can be compared directly against ModernBERT semantic retrieval, highlighting differences in ranking stability, error modes, and semantic generalization.</p>
</section>
</section>
<section id="modernbert-results-semantic-retrieval" class="level2">
<h2 class="anchored" data-anchor-id="modernbert-results-semantic-retrieval">ModernBERT Results (Semantic Retrieval)</h2>
<p>The same query — “hiking trails in the Dolomites Italy” — was executed using ModernBERT semantic retrieval via FAISS. Results are ranked by semantic distance in embedding space, where lower values indicate greater contextual similarity to the query.</p>
<section id="top-10-results-table-1" class="level3">
<h3 class="anchored" data-anchor-id="top-10-results-table-1">### Top 10 Results Table</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 3%">
<col style="width: 24%">
<col style="width: 15%">
<col style="width: 56%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Rank</th>
<th>Destination</th>
<th>Semantic Distance</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td>Alps</td>
<td><strong>0.49</strong></td>
<td>Direct semantic match to hiking in the Dolomites</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td>Pieralongia (Dolomites)</td>
<td><strong>0.50</strong></td>
<td>Highly specific Dolomites landmark with hiking focus</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td>Rome (Abruzzo / Gran Sasso)</td>
<td><strong>0.57</strong></td>
<td>Mountain hiking in Italy; conceptually similar but wrong region</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td>Chicago</td>
<td><strong>0.60</strong></td>
<td>Outdoor nature narrative, but weak mountain relevance</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td>Italy</td>
<td><strong>0.62</strong></td>
<td>Broad country-level match; lacks destination specificity</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td>Amalfi Coast</td>
<td><strong>0.64</strong></td>
<td>Italy travel content; coastal rather than mountainous</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td>Cinque (Cinque Terre)</td>
<td><strong>0.64</strong></td>
<td>Hiking present, but coastal villages dominate</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td>Florence</td>
<td><strong>0.65</strong></td>
<td>Tuscan countryside and hills; weak hiking specificity</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td>Cinque Terre</td>
<td><strong>0.65</strong></td>
<td>Similar to rank 7; scenic hiking but not alpine</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td>Italy</td>
<td><strong>0.66</strong></td>
<td>Generic Italy travel overview</td>
</tr>
</tbody>
</table>
<p><em>Lower distance values indicate higher semantic similarity.</em></p>
</section>
<section id="query-1-map-1" class="level3">
<h3 class="anchored" data-anchor-id="query-1-map-1">Query 1 Map</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/bert_query_1.png" class="img-fluid figure-img"></p>
<figcaption>ModernBERT Query 1 Map</figcaption>
</figure>
</div>
</section>
<section id="interpretation-1" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-1">Interpretation</h3>
<p>ModernBERT demonstrates strong semantic precision at the top of the ranking, with the first two results aligning exactly with the intended destination and activity. Both Alps and Pieralongia are explicitly associated with hiking in the Dolomites, confirming that the embedding model successfully captures both geographic and experiential intent.</p>
<p>As rank increases, the results gradually broaden in semantic scope:</p>
<ul>
<li>Rank 3 (Rome / Abruzzo) remains contextually relevant due to descriptions of dolomite peaks, national parks, and rugged mountain hiking, even though it does not match the Dolomites geographically.</li>
<li>Mid-ranked results (Chicago, Italy) reflect thematic overlap with outdoor exploration and travel narratives, but lack strong alignment with alpine hiking.</li>
<li>Lower-ranked results (Amalfi Coast, Cinque Terre, Florence) emphasize scenic travel and light hiking, but shift away from mountainous terrain.</li>
<li>Bottom-ranked results become increasingly generic, representing Italy-wide travel content rather than destination-specific hiking experiences.</li>
</ul>
<p>This smooth degradation illustrates how ModernBERT prioritizes conceptual similarity first, gradually relaxing constraints as distance increases.</p>
</section>
<section id="llm-generated-explanations-top-results-1" class="level3">
<h3 class="anchored" data-anchor-id="llm-generated-explanations-top-results-1">LLM-Generated Explanations (Top Results)</h3>
<p>The explanation module provides additional insight into the semantic ranking:</p>
<p><strong>Alps:</strong> The explanation references specific Dolomites hiking trails (e.g., Roda de Pütia, San Lorenzo), via ferrata routes, alpine lodges, and climbing opportunities, confirming a near-perfect match to the query intent.</p>
<p><strong>Pieralongia:</strong> The explanation highlights iconic Dolomites landmarks such as Seceda, Pieralongia rocks, and Alpe di Siusi, as well as hiking routes and alpine meadows near Ortisei in Val Gardena.</p>
<p><strong>Rome (Abruzzo / Gran Sasso):</strong> Although geographically incorrect, the explanation reveals why this result appears: the blog post discusses dolomite peaks, rugged mountains, and hiking trails within Gran Sasso National Park, demonstrating semantic rather than lexical matching.</p>
</section>
<section id="key-takeaway-modernbert" class="level3">
<h3 class="anchored" data-anchor-id="key-takeaway-modernbert">Key Takeaway (ModernBERT)</h3>
<p>This full ranking demonstrates that ModernBERT:</p>
<ul>
<li>Strongly prioritizes semantic alignment at the top of results</li>
<li>Preserves mountain hiking intent even when geography drifts</li>
<li>Avoids activity-only false positives (e.g., tropical islands) seen in BM25</li>
<li>Gradually relaxes specificity rather than introducing abrupt noise</li>
</ul>
<p>Compared to BM25, ModernBERT produces a more coherent semantic ranking, where errors reflect conceptual similarity rather than unrelated keyword overlap. This behavior is especially well-suited for exploratory travel queries where intent matters more than strict lexical precision.</p>
</section>
</section>
</section>
<section id="query-2-small-seaside-towns-known-for-local-food-and-slow-travel" class="level1">
<h1>Query 2: “small seaside towns known for local food and slow travel”</h1>
<p><strong>Selected Activities:</strong> museums, swimming, sailing, eating <strong>Geographic Type:</strong> coastal, seaside, beach</p>
<p>This query is intentionally phrased to include descriptive experiential terms (“small,” “local food,” “slow travel”) while still containing clear coastal keywords, allowing us to evaluate how BM25 handles lifestyle-oriented intent using lexical matching alone.</p>
<section id="bm25-results-1" class="level2">
<h2 class="anchored" data-anchor-id="bm25-results-1">BM25 Results</h2>
<section id="top-10-results-table-2" class="level3">
<h3 class="anchored" data-anchor-id="top-10-results-table-2">Top 10 Results Table</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 3%">
<col style="width: 20%">
<col style="width: 13%">
<col style="width: 62%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Rank</th>
<th>Destination</th>
<th>Relevance Score</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td>Maine</td>
<td><strong>49.55</strong></td>
<td>Strong lexical match on “coastal,” “beach towns,” and seaside language</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td>Boston</td>
<td><strong>48.92</strong></td>
<td>Matches “towns near Boston,” coastal context implied</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td>Grayton Beach</td>
<td><strong>42.11</strong></td>
<td>Explicit seaside town with food and beach activities</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td>San Francisco</td>
<td><strong>40.61</strong></td>
<td>Urban coastal city; weak “small town” alignment</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td>Santa Barbara</td>
<td><strong>39.89</strong></td>
<td>Coastal destination; more city-like than town</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td>Florida (Seaside / 30A)</td>
<td><strong>39.47</strong></td>
<td>Strong beach and food overlap; region-level</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td>Florida (30A region)</td>
<td><strong>39.46</strong></td>
<td>Similar to rank 6; repeated coastal keyword hits</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td>Maine</td>
<td><strong>39.29</strong></td>
<td>Duplicate regional result; broad coastal framing</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td>Astoria, Oregon</td>
<td><strong>38.12</strong></td>
<td>Small coastal town with cultural relevance</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td>Boston</td>
<td><strong>37.61</strong></td>
<td>Duplicate regional entry</td>
</tr>
</tbody>
</table>
</section>
<section id="query-2-map" class="level3">
<h3 class="anchored" data-anchor-id="query-2-map">Query 2 Map</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/bm25_query_2.png" class="img-fluid figure-img"></p>
<figcaption>BM25 Query 2 Map</figcaption>
</figure>
</div>
</section>
<section id="interpretation-2" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-2">Interpretation</h3>
<p>BM25 performs well at identifying coastal and seaside-related destinations, as evidenced by the dominance of shoreline locations across the top 10 results. However, the ranking also reveals several important limitations when handling experiential intent:</p>
<ul>
<li>Broad regions and cities (e.g., Maine, Boston, San Francisco) are ranked above smaller towns, despite the query explicitly requesting small seaside towns.</li>
<li>Duplicate regional entries (e.g., Maine, Florida, Boston) appear multiple times, indicating BM25’s sensitivity to repeated keyword mentions rather than destination granularity.</li>
<li>While many results satisfy coastal criteria, fewer consistently satisfy slow travel or local food intent in a nuanced way.</li>
</ul>
<p>Overall, BM25 emphasizes keyword density over interpretive intent, favoring documents that frequently mention “coastal,” “beach,” or “town,” regardless of scale or travel pace.</p>
</section>
<section id="llm-generated-explanations-top-results-2" class="level3">
<h3 class="anchored" data-anchor-id="llm-generated-explanations-top-results-2">LLM-Generated Explanations (Top Results)</h3>
<p>The explanation module provides insight into why the highest-ranked destinations were returned:</p>
<p><strong>Maine:</strong> The explanation highlights small coastal towns such as Ogunquit, Kennebunkport, and Wells, emphasizing seafood-based local cuisine, museums like the Ogunquit Museum of American Art, and seaside activities including swimming and sailing. This confirms a strong lexical and thematic match, despite Maine being a broad regional label.</p>
<p><strong>Boston:</strong> Although Boston itself is a major city, the explanation clarifies that the retrieved content focuses on nearby small coastal towns such as Rockport. These towns offer local food, art galleries, harbor sailing, and a slower pace of travel, partially aligning with the query intent.</p>
<p><strong>Grayton Beach:</strong> The explanation emphasizes Grayton Beach’s small-town character along Florida’s Highway 30A, highlighting local eateries, relaxed beach culture, and slow-paced exploration. This represents one of the strongest town-level matches in the ranking.</p>
</section>
<section id="key-takeaway-bm25-1" class="level3">
<h3 class="anchored" data-anchor-id="key-takeaway-bm25-1">Key Takeaway (BM25)</h3>
<p>This example demonstrates that BM25:</p>
<ul>
<li>Effectively identifies coastal-related content</li>
<li>Performs well when queries include clear descriptive keywords</li>
<li>Tends to prioritize regions and cities over fine-grained destinations</li>
<li>Does not explicitly model concepts like slow travel or local culture</li>
<li>While BM25 surfaces many relevant coastal locations, it struggles to consistently enforce scale (small towns) and experiential intent, motivating the use of semantic retrieval to better capture nuanced travel preferences.</li>
</ul>
<p>In the next section, these results can be directly compared against ModernBERT semantic retrieval to evaluate whether embedding-based search produces more town-specific and experience-aligned rankings.</p>
</section>
</section>
<section id="modernbert-results-semantic-retrieval-1" class="level2">
<h2 class="anchored" data-anchor-id="modernbert-results-semantic-retrieval-1">ModernBERT Results (Semantic Retrieval)</h2>
<p>The same query, “small seaside towns known for local food and slow travel”, was executed using ModernBERT semantic retrieval via FAISS. Results are ranked by semantic distance in embedding space, where lower values indicate stronger contextual similarity to the query.</p>
<section id="top-10-results-table-3" class="level3">
<h3 class="anchored" data-anchor-id="top-10-results-table-3">Top 10 Results Table</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 3%">
<col style="width: 28%">
<col style="width: 14%">
<col style="width: 53%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Rank</th>
<th>Destination</th>
<th>Semantic Distance</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td>South Shore (MA)</td>
<td><strong>0.57</strong></td>
<td>Strong match to slow travel, coastal towns, and local culture</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td>Maine</td>
<td><strong>0.61</strong></td>
<td>Small seaside towns with food, museums, and sailing</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td>California</td>
<td><strong>0.62</strong></td>
<td>Small towns and hidden beaches; experiential alignment</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td>Sydney</td>
<td><strong>0.62</strong></td>
<td>Coastal lifestyle and day trips; city-level</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td>Salem (MA)</td>
<td><strong>0.62</strong></td>
<td>Historic coastal town with museums and walkability</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td>France (La Rochelle / Île de Ré)</td>
<td><strong>0.63</strong></td>
<td>Seaside towns emphasizing slow travel and food</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td>Italy</td>
<td><strong>0.64</strong></td>
<td>Cultural and culinary focus; broad geography</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td>Florida (Seaside / 30A)</td>
<td><strong>0.64</strong></td>
<td>Coastal living and relaxed pace</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td>Northern Michigan</td>
<td><strong>0.65</strong></td>
<td>Small coastal town with local character</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td>Charleston</td>
<td><strong>0.66</strong></td>
<td>Historic coastal city; less “small town”</td>
</tr>
</tbody>
</table>
<p><em>Lower distance values indicate higher semantic similarity.</em></p>
</section>
<section id="query-2-map-1" class="level3">
<h3 class="anchored" data-anchor-id="query-2-map-1">Query 2 Map</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/bert_query_2.png" class="img-fluid figure-img"></p>
<figcaption>ModernBERT Query 2 Map</figcaption>
</figure>
</div>
</section>
<section id="interpretation-3" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-3">Interpretation</h3>
<p>ModernBERT surfaces destinations that closely align with the experiential intent of the query, particularly slow travel, local food, and small coastal settings.</p>
<ul>
<li>The top-ranked result, South Shore, Massachusetts, strongly reflects the query’s intent by emphasizing quiet coastal towns, local museums, sailing programs, beach exploration, and a relaxed pace of travel.</li>
<li>Maine and Northern Michigan appear due to their narrative emphasis on charming seaside towns, seafood-driven local cuisine, and low-density coastal environments.</li>
<li>France (La Rochelle / Île de Ré) emerges as a strong semantic match despite geographic distance, reflecting ModernBERT’s ability to generalize the concept of slow seaside living across countries.</li>
</ul>
<p>As ranking depth increases, results gradually broaden:</p>
<ul>
<li>City-level destinations (e.g., Sydney, Charleston) appear due to strong cultural and coastal narratives, despite partially violating the “small town” constraint.</li>
<li>Country-level entries (California, Italy) reflect broader travel narratives emphasizing hidden towns and culinary experiences, but lack fine-grained destination specificity.</li>
</ul>
<p>This gradual relaxation contrasts with BM25’s sharper drop-off into geographically irrelevant results.</p>
</section>
<section id="llm-generated-explanations-top-results-3" class="level3">
<h3 class="anchored" data-anchor-id="llm-generated-explanations-top-results-3">LLM-Generated Explanations (Top Results)</h3>
<p>The explanation module clarifies why ModernBERT prioritizes these results:</p>
<p><strong>South Shore (Massachusetts):</strong> The explanation highlights towns such as Plymouth, Duxbury, and Sandwich, emphasizing slow-paced exploration, local museums, sailing camps, beach swimming, and food-centered community events—closely matching all aspects of the query.</p>
<p><strong>Maine:</strong> The explanation references small coastal towns like Ogunquit and Camden, focusing on seafood cuisine, art museums, sailing, and relaxed seaside atmospheres consistent with slow travel.</p>
<p><strong>California:</strong> The explanation focuses on small towns and hidden beaches, highlighting local food traditions, museums, and immersive stays that support slow travel, even when destinations are slightly inland.</p>
</section>
<section id="key-takeaway-modernbert-1" class="level3">
<h3 class="anchored" data-anchor-id="key-takeaway-modernbert-1">Key Takeaway (ModernBERT)</h3>
<p>This example demonstrates that ModernBERT:</p>
<ul>
<li>Captures experiential and lifestyle-oriented intent beyond keywords</li>
<li>Prioritizes slow travel, local culture, and town-scale settings</li>
<li>Produces semantically coherent results across geographies</li>
<li>Relaxes geographic constraints gradually rather than abruptly</li>
</ul>
<p>Compared to BM25, ModernBERT is more effective at modeling how a destination feels, making it better suited for exploratory travel queries where nuance, pace, and local culture matter more than exact keyword matches.</p>


</section>
</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>